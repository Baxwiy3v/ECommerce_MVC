@model ShopVM
@{

	int count = Model.CurrentPage * 6;
}
<style>
	.star-select {
		appearance: none;
		-webkit-appearance: none;
		-moz-appearance: none;
		border: none;
		background: none;
		font-size: 20px;
		color: gold;
		cursor: pointer;
	}
</style>
<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-option">
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<div class="breadcrumb__text">
					<h4>Shop</h4>
					<div class="breadcrumb__links">
						<a asp-action="Index" asp-controller="Home">Home</a>
						<span>Shop</span>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<!-- Breadcrumb Section End -->
<!-- Shop Section Begin -->
<section class="shop spad">
	<div class="container">
		<div class="row">
			<div class="col-lg-3">
				<div class="shop__sidebar">
					<div class="shop__sidebar__search">
						<form asp-route-minPrice="@Model.MinPrice" asp-route-maxPrice="@Model.MaxPrice" asp-route-page="@Model.CurrentPage" asp-action="Index" asp-controller="Shop" asp-route-categoryId="@Model.CategoryID" asp-route-order="@Model.Order">
							<input name="search" value="@(Model.Search==null?"":Model.Search)" type="text" placeholder="Search...">
							<button type="submit"><span class="icon_search"></span></button>
						</form>
					</div>
					<div class="shop__sidebar__accordion">
						<div class="accordion" id="accordionExample">
							<div class="card">
								<div class="card-heading">
									<a data-toggle="collapse" data-target="#collapseOne">Categories</a>
								</div>
								<div id="collapseOne" class="collapse show" data-parent="#accordionExample">
									<div class="card-body">
										<div class="shop__sidebar__categories">
											<ul class="nice-scroll">
												<li><a asp-route-minPrice="@Model.MinPrice" asp-route-maxPrice="@Model.MaxPrice" asp-action="Index" asp-controller="Shop" asp-route-order="@Model.Order" asp-route-search="@Model.Search" asp-route-page="@Model.CurrentPage">All </a></li>
												@foreach (var category in Model.Categories)
												{
													<li>
														<a  asp-route-minPrice="@Model.MinPrice" asp-route-maxPrice="@Model.MaxPrice" asp-route-page="@Model.CurrentPage" asp-action="Index" asp-controller="Shop" asp-route-categoryId="@category.Id" asp-route-order="@Model.Order" asp-route-search="@Model.Search">

															@category.Name (@category.Products.Count)

														</a>

													</li>

												}
											
											</ul>
										</div>
									</div>
								</div>
							</div>

							<div class="card">
								<div class="card-heading">
									<a data-toggle="collapse" data-target="#collapseThree">Filter Price</a>
								</div>
								<div id="collapseThree" class="collapse show" data-parent="#accordionExample">
									<div class="card-body">
										<div class="shop__sidebar__price">
											<form asp-controller="Shop" asp-action="Index" asp-route-page="@Model.CurrentPage" asp-route-order="@Model.Order" asp-route-search="@Model.Search" asp-route-categoryId="@Model.CategoryID" method="get">
												<label for="minPrice">Minimum Price:</label>
												<input type="number" name="minPrice" id="minPrice" />

												<label for="maxPrice">Maksimum Price:</label>
												<input type="number" name="maxPrice" id="maxPrice" />

												<label>.</label>
												<button class="btn btn-outline-primary" type="submit">Submit</button>
											</form>
										</div>
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-heading">
									<a data-toggle="collapse" data-target="#collapseFour">Size</a>
								</div>
								<div id="collapseFour" class="collapse show" data-parent="#accordionExample">
									<div class="card-body">
										<div class="shop__sidebar__size">
											<label for="xs">
												xs
												<input type="radio" id="xs">
											</label>
											<label for="sm">
												s
												<input type="radio" id="sm">
											</label>
											<label for="md">
												m
												<input type="radio" id="md">
											</label>
											<label for="xl">
												xl
												<input type="radio" id="xl">
											</label>
											<label for="2xl">
												2xl
												<input type="radio" id="2xl">
											</label>
											<label for="xxl">
												xxl
												<input type="radio" id="xxl">
											</label>
											<label for="3xl">
												3xl
												<input type="radio" id="3xl">
											</label>
											<label for="4xl">
												4xl
												<input type="radio" id="4xl">
											</label>
										</div>
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-heading">
									<a data-toggle="collapse" data-target="#collapseFive">Colors</a>
								</div>
								<div id="collapseFive" class="collapse show" data-parent="#accordionExample">
									<div class="card-body">
										<div class="shop__sidebar__color">
											<label class="c-1" for="sp-1">
												<input type="radio" id="sp-1">
											</label>
											<label class="c-2" for="sp-2">
												<input type="radio" id="sp-2">
											</label>
											<label class="c-3" for="sp-3">
												<input type="radio" id="sp-3">
											</label>
											<label class="c-4" for="sp-4">
												<input type="radio" id="sp-4">
											</label>
											<label class="c-5" for="sp-5">
												<input type="radio" id="sp-5">
											</label>
											<label class="c-6" for="sp-6">
												<input type="radio" id="sp-6">
											</label>
											<label class="c-7" for="sp-7">
												<input type="radio" id="sp-7">
											</label>
											<label class="c-8" for="sp-8">
												<input type="radio" id="sp-8">
											</label>
											<label class="c-9" for="sp-9">
												<input type="radio" id="sp-9">
											</label>
										</div>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-9">
				<div class="shop__product__option">
					<div class="row">
						<div class="col-lg-6 col-md-6 col-sm-6">
							<div class="shop__product__option__left">
							</div>
						</div>
						<div class="col-lg-6 col-md-6 col-sm-6">
							<div class="shop__product__option__right">

								<form asp-action="Index" asp-controller="Shop" asp-route-categoryId="@Model.CategoryID" asp-route-search="@Model.Search" asp-route-page="@Model.CurrentPage" asp-route-minPrice="@Model.MinPrice" asp-route-maxPrice="@Model.MaxPrice">

									<select onchange="this.form.submit()" name="order" id="mySelect">

										
										@if (Model.Order is null)
										{
										<option value="" selected>Default</option>
											<option value="1" >Sort by Name</option>
											<option value="2">Sort by Price</option>
											<option value="3">Sort by Data</option>
										}
										else if (Model.Order == 1)
										{
											<option value="" >Default</option>
											<option value="1" selected>Sort by Name</option>
											<option value="2">Sort by Price</option>
											<option value="3">Sort by Data</option>
										}
										else if (Model.Order == 2)
										{
											<option value="">Default</option>
											<option value="1">Sort by Name</option>
											<option value="2" selected>Sort by Price</option>
											<option value="3">Sort by Data</option>


										}
										else if (Model.Order == 3)
										{
											<option value="">Default</option>
											<option value="1">Sort by Name</option>
											<option value="2">Sort by Price</option>
											<option value="3" selected>Sort by Data</option>
										}
										
									</select>


								</form>

							</div>
						</div>
					</div>
				</div>
				<div class="row">
					@foreach (var product in Model.Products)
					{
						<div class="col-lg-4 col-md-6 col-sm-6">
							<div class="product__item">
								<div class="product__item__pic set-bg">
									<span><img style="height:275px;width:375px;" src="~/img/product/@product.ProductImages.FirstOrDefault(pi=>pi.IsPrimary==true).Url " /></span>

									<ul class="product__hover">
										<li> <a class="btn btn-outline-warning" asp-controller="Basket" asp-action="AddBasket" asp-route-id="@product.Id"><i class="fa fa-shopping-cart"></i></a></li>

										<li><a class="btn btn-outline-warning" asp-action="AddWishlist" asp-controller="Home" asp-route-id="@product.Id"> <i class="fa fa-heart"></i></a></li>
									</ul>
								</div>
								<br>
								<div>
									<a class="btn btn-outline-warning" asp-action="Detail" asp-controller="Home" asp-route-id="@product.Id">@product.Name</a><br>

									<h5>$@product.Price</h5>

									@{
										int? numberOfStars = Model.Products.FirstOrDefault(x => x.Id == product.Id).AverageRating != null ? (int)Model.Products.FirstOrDefault(x => x.Id == product.Id).AverageRating : 0;
									}

									@if (numberOfStars > 0)
									{


										@for (int i = 0; i < numberOfStars; i++)
										{
											<span class="star-select">&#9733;</span>
										}
									}
									else
									{
										<p class="text-black">No ratings yet.</p>
									}
								</div>
							</div>
						</div>

					}

				</div>
				<nav aria-label="Page navigation example" style="margin: auto; width: 40%;">
					<ul class="pagination">

						<li class="page-item  @(Model.CurrentPage==0?"disabled":"") "><a asp-route-categoryId="@Model.CategoryID" asp-route-order="@Model.Order" asp-route-minPrice="@Model.MinPrice" asp-route-maxPrice="@Model.MaxPrice" class="page-link" asp-route-page="@(Model.CurrentPage-1)" asp-action="Index" asp-controller="Shop">Previous</a></li>
						@for (int i = 0; i < Model.TotalPage; i++)

						{
							<li class="page-item  @(i==Model.CurrentPage?"disabled":"") "><a asp-route-categoryId="@Model.CategoryID" asp-route-order="@Model.Order" asp-route-minPrice="@Model.MinPrice" asp-route-maxPrice="@Model.MaxPrice" class="page-link" asp-route-page="@(i)" asp-action="Index" asp-controller="Shop">@(i + 1)</a></li>
						}

						<li class="page-item  @(Model.CurrentPage==Model.TotalPage-1?"disabled":"") "><a asp-route-categoryId="@Model.CategoryID" asp-route-order="@Model.Order" asp-route-minPrice="@Model.MinPrice" asp-route-maxPrice="@Model.MaxPrice" class="page-link" asp-route-page="@(Model.CurrentPage+1)" asp-action="Index" asp-controller="Shop">Next</a></li>
					</ul>
				</nav>
			</div>
		</div>
	</div>
</section>
<!-- Shop Section End -->
